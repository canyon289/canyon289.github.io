<!DOCTYPE html>
<html lang="en">
	<head>
		<link href="http://gmpg.org/xfn/11" rel="profile">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">

		<!-- Enable responsiveness on mobile devices-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

		<title>Ravin Kumar</title>

		<!-- For Jupyter Notebooks -->

<!--Notebook Configuration-->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']],
          processEscapes: true,
          displayMath: [['$$','$$'], ["\\[","\\]"]]
      }
  });
</script>

<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<script type="text/javascript">
  jQuery(document).ready(function($) {
      $("div.collapseheader").click(function () {
      $header = $(this).children("span").first();
      $codearea = $(this).children(".input_area");
      console.log($(this).children());
      $codearea.slideToggle(500, function () {
          $header.text(function () {
              return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
          });
      });
  });
  });
</script>

		<!-- CSS -->
		<link href="//fonts.googleapis.com/" rel="dns-prefetch">
		<link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Abril+Fatface|PT+Sans:400,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="./theme/css/notebook.css" />

		<link rel="stylesheet" href="./theme/css/poole.css" />
		<link rel="stylesheet" href="./theme/css/hyde.css" />
		<link rel="stylesheet" href="./theme/css/syntax.css" />
        <link rel="stylesheet" href="./theme/css/svgcenter.css" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">


        <!-- CSS style sheets for pelican javascript plugin -->


		<!-- RSS -->
		<link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
	<script type="text/javascript">
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-52706904-2', 'auto');
			ga('send', 'pageview');
	</script>
	</head>

	<body class="theme-base-darkgreen">
<div class="sidebar">
    <div class="container">
        <div >
            <h1 class="sidebar-title">
                <a href="/">
                    <!---<img class="profile-picture" src="./images/"> --->
                    <!---['Ravin Kumar']--->
                    Ravin Kumar

                </a>
            </h1>
        </div>

        <!---Add Blog Manually --->
        <h1 class = "sidebar-page">
            <a href="./blog.html">
                Blog
            </a>
        </h1>

      <!---Add Pages for Static Content --->
        <div>
            <h1 class = "sidebar-page">
              <a href="./pages/References.html">
              References
              </a>
            </h1>
        </div>
        <div>
            <h1 class = "sidebar-page">
              <a href="./pages/Talks.html">
              Talks
              </a>
            </h1>
        </div>
    <div>
    <nav class="sidebar-nav">
                <a class="sidebar-nav-item" href="https://www.linkedin.com/in/ravinakumar">
                    <i class="fa fa-linkedin"></i>
                </a>
                <a class="sidebar-nav-item" href="https://github.com/canyon289">
                    <i class="fa fa-github"></i>
                </a>
                <a class="sidebar-nav-item" href="https://twitter.com/canyon289">
                    <i class="fa fa-twitter"></i>
                </a>

    </nav>
    </div>
    </div>
</div>		<div class="content container">
<div class="post">
	<h1 class="post-title">Migrating from TravisCI to Azure Pipelines</h1>
	<span class="post-date">Sun 02 June 2019</span>
	<p>I'm in the process of testing out Azure Pipelines
with <a href="https://arviz-devs.github.io/arviz/">ArviZ</a>, and in
the process have learned more about the platform. I'll share
my motivation as well as some tips.</p>
<p>Note that this is a live blog post that I'll continue to
update as a I learn more.</p>
<h1 id="motivation"><a class="toclink" href="#motivation">Motivation</a></h1>
<p>Many Open Source projects on free tiers of services quite heavily.
TravisCI was one of those vendors which provided a free tier for 
open source but after its acquisition its future is uncertain.</p>
<p>At the same time Microsoft seems to be heavily investing in open
source, through acquisitions like GitHub and by open sourcing projects
like VScode.</p>
<p>Practically speaking Microsoft is also offering more parallel builds and longer runtime
than TravisCI. PyMC3 recently ran into TravisCI's 50 minute build limit and we had to do some hacky
stuff to get around it. Having 6 hours of build time in Azure is very convenient.</p>
<p>Due to these reasons we are trying both services in parallel to see which is a better
fit for ArviZ given current circumstances.</p>
<h2 id="tips"><a class="toclink" href="#tips">Tips</a></h2>
<p>This section is a grab bag of tips from my ramp up to Azure. I'll be
updating it as I learn more.</p>
<h2 id="skip-the-main-docs-initially"><a class="toclink" href="#skip-the-main-docs-initially">Skip the main docs initially</a></h2>
<p>One upside of Azure is that it's more flexible than TravisCI, but it's
also more complicated and the docs aren't great. I would advise skipping
to the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/migrate/from-travis?view=azure-devops">migration</a>
section of the docs so you can start from known ground, before working
into Azure's complexity.</p>
<p>I also found this blog post from <a href="https://hynek.me/articles/simple-python-azure-pipelines/">Hynek Schlawack</a>
to be quite helpful.</p>
<h2 id="read-others-implementations"><a class="toclink" href="#read-others-implementations">Read others implementations</a></h2>
<p>It's a lot easier to see the functionality if you look for other people's code.
I referenced <a href="https://github.com/ericmjl/pyjanitor/tree/dev/.azure-pipelines">PyJanitor's</a>
implementation as a reference for mine.</p>
<p>For your aid here's both our <a href="https://github.com/arviz-devs/arviz/blob/master/.travis.yml">TravisCI yaml file</a>
and our <a href="https://github.com/arviz-devs/arviz/pull/688/files">Azure Pipelines</a>
PR for a one to one comparison.</p>
<h2 id="docs-exist-for-most-major-languages"><a class="toclink" href="#docs-exist-for-most-major-languages">Docs exist for most major languages</a></h2>
<p>Specific documentation exists for common workflows in common languages.
For example this <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/languages/python?view=azure-devops">python</a>
doc was particularly helpful as ArviZ is written in Python. </p>
<h2 id="azure-pipelines-has-built-in-code-coverage-and-test-stats"><a class="toclink" href="#azure-pipelines-has-built-in-code-coverage-and-test-stats">Azure Pipelines has built in code coverage and test stats</a></h2>
<p>Coveralls, codecov, and other provide great free tiers for their services
but integration isn't always straightforward. In ArviZ's case Coveralls
doesn't have an "out of the box" solution for Azure Pipelines yet.</p>
<p>Luckily Azure Pipelines has a bunch of these services built in as tasks.
Having things in one place is convenient should mean a lesser chance 
of coverage or testing tools breaking.</p>
<h2 id="tasks-are-like-functions"><a class="toclink" href="#tasks-are-like-functions">Tasks are like functions</a></h2>
<p>I found the docs for tasks to be particularly confusing and it took me a while
to latch onto the central concept, so in attempt to help here's my two liner.   </p>
<p><em>Tasks are like functions, they take inputs and then they "do a thing".
You can add tasks to your CI pipeline by copying a task block into your 
YAML file</em></p>
<p>Here's an example of the <a href="https://github.com/arviz-devs/arviz/blob/cb2a43d3882cbe1fd084d0a863be7bdaeb0a7ab5/azure-pipelines.yml#L85">Code Coverage task</a> from ArviZ in context. The official documentation
shows <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/index?view=azure-devops">some screenshots</a>
, but after hours of clicking around I never found it and ended up realizing
that that WebGUI was not needed.</p>
<h2 id="whats-next"><a class="toclink" href="#whats-next">What's next</a></h2>
<p>We're going to trial both CI pipelines with ArviZ to see which one we should
move forward with. When we know I'll update this blog post. Happy CIing.</p>
</div>
		</div>
	</body>

    <!-- Javascript Loader for Pelican Javascript plugin-->
</html>