<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Meta tags -->
		<meta charset="utf-8">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">

		<title>Ravin Kumar</title>
		<link rel="shortcut icon" type="image/x-icon" href="./images/logo/logo.png" />

		<meta name="description" content="Ravin Kumar is a data scientist and an open source contributor." />
		<meta property="og:title" content="Ravin Kumar" />
		<meta property="og:url" content="." />
		<meta property="og:image" content="./images/logo/logo.png" />
		<meta property="og:description" content="Ravin Kumar is a data scientist and an open source contributor." />
		<meta name="twitter:site" content="https://twitter.com/canyon289" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

		<!-- Jupyter Notebooks -->

<!--Notebook Configuration-->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']],
          processEscapes: true,
          displayMath: [['$$','$$'], ["\\[","\\]"]]
      }
  });
</script>

<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<script type="text/javascript">
  jQuery(document).ready(function($) {
      $("div.collapseheader").click(function () {
      $header = $(this).children("span").first();
      $codearea = $(this).children(".input_area");
      console.log($(this).children());
      $codearea.slideToggle(500, function () {
          $header.text(function () {
              return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
          });
      });
  });
  });
</script>

		<!-- CSS -->
		<link rel="stylesheet" href="./theme/css/codesyntax.css" />
        <link rel="stylesheet" href="./theme/css/svgstyles.css" />
		<link rel="stylesheet" href="./theme/css/main.css" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

        <!-- CSS for Pelican Javascript plugin -->

		<!-- RSS -->
		<link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
		
		<!-- Google Analytics -->
	<script type="text/javascript">
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-52706904-2', 'auto');
			ga('send', 'pageview');
	</script>
	</head>

	<body class='page body-article'>  <!-- extends -->

<div id="main-menu-mobile" class="main-menu-mobile">
    <ul>
        <li class="menu-item-home"></li>
            <a href=".">
                <img alt="Logo" src="./images/logo/logo-stroke-white.png" style="padding: 10px;"/>
            </a>
        </li>
        <!---Add Blog Manually --->
        <li class="menu-item-blog">
            <a href="./blog.html">
                <span>Blog</span>
            </a>
        </li>
        <!---Add Remaining Pages (excluding About) --->
           <li class="menu-item-references">
            <a href="./pages/References.html">
                <span>References</span>
            </a>
        </li>
          <li class="menu-item-talks">
            <a href="./pages/Talks.html">
                <span>Talks</span>
            </a>
        </li>
     </ul>
</div>
		<div class="wrapper body-wrapper">
			<!-- Header -->
<div class="header">
    <div class="logo">
        <a href=".">
            <img alt="Logo" src="./images/logo/logo.png" style="padding: 10px;"/>
        </a>
    </div>
    <div class="logo-mobile">
        <a href=".">
            <img alt="Logo" src="./images/logo/logo.png" style="padding: 10%;"/>
        </a>
    </div>
<div id="main-menu" class="main-menu">
    <ul>
        <!---Add Blog Manually --->
        <li class="menu-item-blog">
            <a href="./blog.html">Blog</a>
        </li>
        <!---Add Remaining Pages (excluding About) --->
           <li class="menu-item-references">
            <a href="./pages/References.html">References</a>
        </li>
          <li class="menu-item-talks">
            <a href="./pages/Talks.html">Talks</a>
        </li>
     </ul>
</div><button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
    <span class="hamburger-box">
        <span class="hamburger-inner"></span>
    </span>
</button></div>		
			<!-- Content -->
<div class="categories-menu">
  <h4>Search by Category</h4>
  <ul class="categories">
    <li>
        <a href="./category/data-science.html" class="">Data Science</a>
    </li>
    <li>
        <a href="./category/life.html" class="">Life</a>
    </li>
    <li>
        <a href="./category/programming.html" class="active">Programming</a>
    </li>
    <li>
        <a href="./category/statistics.html" class="">Statistics</a>
    </li>
  </ul>
</div>			<div class="content">

	<h1 class="page-title">Migrating from TravisCI to Azure Pipelines</h1>
	<p class="post-date">Jun 02, 2019</p>
	<p>I'm in the process of testing out Azure Pipelines
with <a href="https://arviz-devs.github.io/arviz/">ArviZ</a>, and in
the process have learned more about the platform. I'll share
my motivation as well as some tips.</p>
<p>Note that this is a live blog post that I'll continue to
update as a I learn more.</p>
<h1 id="motivation">Motivation</h1>
<p>Many Open Source projects on free tiers of services quite heavily.
TravisCI was one of those vendors which provided a free tier for 
open source but after its acquisition its future is uncertain.</p>
<p>At the same time Microsoft seems to be heavily investing in open
source, through acquisitions like GitHub and by open sourcing projects
like VScode.</p>
<p>Practically speaking Microsoft is also offering more parallel builds and longer runtime
than TravisCI. PyMC3 recently ran into TravisCI's 50 minute build limit and we had to do some hacky
stuff to get around it. Having 6 hours of build time in Azure is very convenient.</p>
<p>Due to these reasons we are trying both services in parallel to see which is a better
fit for ArviZ given current circumstances.</p>
<h2 id="tips">Tips</h2>
<p>This section is a grab bag of tips from my ramp up to Azure. I'll be
updating it as I learn more.</p>
<h2 id="skip-the-main-docs-initially">Skip the main docs initially</h2>
<p>One upside of Azure is that it's more flexible than TravisCI, but it's
also more complicated and the docs aren't great. I would advise skipping
to the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/migrate/from-travis?view=azure-devops">migration</a>
section of the docs so you can start from known ground, before working
into Azure's complexity.</p>
<p>I also found this blog post from <a href="https://hynek.me/articles/simple-python-azure-pipelines/">Hynek Schlawack</a>
to be quite helpful.</p>
<h2 id="read-others-implementations">Read others implementations</h2>
<p>It's a lot easier to see the functionality if you look for other people's code.
I referenced <a href="https://github.com/ericmjl/pyjanitor/tree/dev/.azure-pipelines">PyJanitor's</a>
implementation as a reference for mine.</p>
<p>For your aid here's both our <a href="https://github.com/arviz-devs/arviz/blob/master/.travis.yml">TravisCI yaml file</a>
and our <a href="https://github.com/arviz-devs/arviz/pull/688/files">Azure Pipelines</a>
PR for a one to one comparison.</p>
<h2 id="docs-exist-for-most-major-languages">Docs exist for most major languages</h2>
<p>Specific documentation exists for common workflows in common languages.
For example this <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/languages/python?view=azure-devops">python</a>
doc was particularly helpful as ArviZ is written in Python. </p>
<h2 id="azure-pipelines-has-built-in-code-coverage-and-test-stats">Azure Pipelines has built in code coverage and test stats</h2>
<p>Coveralls, codecov, and other provide great free tiers for their services
but integration isn't always straightforward. In ArviZ's case Coveralls
doesn't have an "out of the box" solution for Azure Pipelines yet.</p>
<p>Luckily Azure Pipelines has a bunch of these services built in as tasks.
Having things in one place is convenient should mean a lesser chance 
of coverage or testing tools breaking.</p>
<h2 id="tasks-are-like-functions">Tasks are like functions</h2>
<p>I found the docs for tasks to be particularly confusing and it took me a while
to latch onto the central concept, so in attempt to help here's my two liner.   </p>
<p><em>Tasks are like functions, they take inputs and then they "do a thing".
You can add tasks to your CI pipeline by copying a task block into your 
YAML file</em></p>
<p>Here's an example of the <a href="https://github.com/arviz-devs/arviz/blob/cb2a43d3882cbe1fd084d0a863be7bdaeb0a7ab5/azure-pipelines.yml#L85">Code Coverage task</a> from ArviZ in context. The official documentation
shows <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/index?view=azure-devops">some screenshots</a>
, but after hours of clicking around I never found it and ended up realizing
that that WebGUI was not needed.</p>
<h2 id="whats-next">What's next</h2>
<p>We're going to trial both CI pipelines with ArviZ to see which one we should
move forward with. When we know I'll update this blog post. Happy CIing.</p>

			</div> 
		</div>

		<!-- Footer -->
<div class="footer">
    <div class="wrapper footer-wrapper">
        <div class="footer-left">
            <ul>
                <li>
                    <a href="https://www.linkedin.com/in/ravinakumar">
                        <i class="fa fa-linkedin"></i>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/canyon289">
                        <i class="fa fa-github"></i>
                    </a>
                </li>
                <li>
                    <a href="https://twitter.com/canyon289">
                        <i class="fa fa-twitter"></i>
                    </a>
                </li>
            </ul>
        </div>
        <div class="footer-right">
            <a href=".">Ravin Kumar</a>
        </div>
    </div>
</div>
		<!-- Javascript -->
		<script type="text/javascript" src="./theme/js/main.js"></script>
		
		<!-- Javascript for Pelican Javascript plugin -->

	</body>

</html>